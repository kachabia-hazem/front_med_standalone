<div class="container">
  <div class="mb-4">
    <h2>Modifier un Médicament</h2>
  </div>

  <form (ngSubmit)="updateMedicament()">
    <div class="row mb-3">
      <!-- ID Médicament (lecture seule) -->
      <div class="col-sm-2 col-md-2 col-lg-2">
        <label class="form-label">ID Médicament</label>
        <input type="text" 
               [(ngModel)]="currentMedicament.idMed"
               name="idMed" 
               class="form-control"
               readonly>
      </div>

      <!-- Nom Médicament -->
      <div class="col-sm-4 col-md-4 col-lg-4">
        <label class="form-label">Nom Médicament</label>
        <input type="text" 
               [(ngModel)]="currentMedicament.nomMed"
               name="nomMed" 
               class="form-control"
               required>
      </div>

      <!-- Prix Médicament -->
      <div class="col-sm-2 col-md-2 col-lg-2">
        <label class="form-label">Prix Médicament</label>
        <input type="number" 
               [(ngModel)]="currentMedicament.prixMed"
               name="prixMed" 
               class="form-control"
               min="0"
               step="0.01"
               required>
      </div>

      <!-- Date Création -->
      <div class="col-sm-4 col-md-4 col-lg-4">
        <label class="form-label">Date Création</label>
        <input type="date" 
               [ngModel]="currentMedicament.dateCreation | date:'yyyy-MM-dd'"
               (ngModelChange)="currentMedicament.dateCreation = $event"
               name="dateCreation" 
               class="form-control"
               required>
      </div>
    </div>

    <div class="row mb-3">
      <!-- Date Expiration -->
      <div class="col-sm-4 col-md-4 col-lg-4">
        <label class="form-label">Date Expiration</label>
        <input type="date" 
               [ngModel]="currentMedicament.dateExpiration | date:'yyyy-MM-dd'"
               (ngModelChange)="currentMedicament.dateExpiration = $event"
               name="dateExpiration" 
               class="form-control"
               required>
      </div>

      <!-- Classification -->
      <div class="col-sm-8 col-md-8 col-lg-8">
        <label class="form-label">Classification</label>
        <select class="form-control"
                [(ngModel)]="updatedClassId"
                name="classification"
                required>
          <option *ngFor="let class of classifications" 
                  [value]="class.idClass">
            {{ class.nomClass }}
          </option>
        </select>
      </div>
    </div>

    <!-- Bouton de soumission -->
    <div class="mt-3 text-end">
      <button type="submit" 
              class="btn btn-success"
              [disabled]="!isFormValid()">
        Enregistrer les modifications
      </button>
    </div>

    <!-- Message de feedback -->
    <div *ngIf="message" class="mt-3 alert" 
         [class.alert-success]="messageType === 'success'"
         [class.alert-danger]="messageType === 'error'">
      {{ message }}
    </div>
  </form>
</div>